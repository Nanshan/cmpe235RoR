<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
</head>

<body>
<script>
$(function () { 
    $('#container').highcharts({
        chart: {
            type: 'pie'
        },
        title: {
            text: 'Events by Type for <%=@advert.name%>'
        },
        xAxis: {
            categories: ['Impression', 'Click', 'Click-through', 'SMS', 'Map', 'Call']
        },
        yAxis: {
            title: {
                text: 'Number of events'
            }
        },
        series: [{
            name: '<%= @advert.name %>',
	    data: [<%=@advert.events.where(type: "ImpressionEvent").length%>, <%=@advert.events.where(type: "ClickEvent").length%>, <%=@advert.events.where(type: "ClickThroughEvent").length%>, <%=@advert.events.where(type: "SMSEvent").length%>, <%=@advert.events.where(type: "MapEvent").length%>, <%=@advert.events.where(type: "CallEvent").length%>]
        }]
    });
});
</script>
<div id="container" style="width:100%; height:800px;"></div>
</body>
