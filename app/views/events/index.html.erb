<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
</head>

<body>
<script>
$(function () {
    $('#container').highcharts({
        chart: {
            type: 'scatter'
        },
        title: {
            text: 'Tracking Events by Time'
        },
	series: [{
	    data: [
		  <%= "{x: "+Time.now.nsec+", y: 5}" %>	  
  		  <% @events.each do |event| %>
		  <%= ",{x: "+Time.parse(event.created_at).nsec+", y: 5}" %>
		  <% end %>
		  ]
	}]
    });
});
</script>
<div id="container" style="width:100%; height:400px;"></div>

<h1>Listing Events</h1>
 
<table>
  <tr>
    <th>Advertisement</th>
    <th>Event Type</th>
    <th>User Device ID</th>
    <th>User Location</th>
    <th>Timestamp</th>
  </tr>
 
  <% @events.each do |event| %>
    <tr>
      <td><%= Advertisement.find(event.advertisement_id).name %></td>
      <td><%= event.type %></td>
      <td><%= event.user_phone_id %></td>
      <td><%= event.user_location %></td>
      <td><%= event.created_at %></td>
    </tr>
  <% end %>
</table>
